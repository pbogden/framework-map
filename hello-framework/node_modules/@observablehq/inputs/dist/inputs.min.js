// @observablehq/inputs v0.10.6 Copyright 2021 Observable, Inc.
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("htl@0.3.1/dist/htl.min.js")):"function"==typeof define&&define.amd?define(["exports","htl@0.3.1/dist/htl.min.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Inputs=e.Inputs||{},e.htl)}(this,(function(e,t){"use strict";if("undefined"!=typeof document&&!document.querySelector(".oi-3a86ea")){const e=document.createElement("style");e.className="oi-3a86ea",e.textContent=".oi-3a86ea{--length1:3.25px;--length2:6.5px;--length3:13px;--label-width:120px;--input-width:240px;font:13px/1.2 var(--sans-serif)}form.oi-3a86ea{display:flex;align-items:center;flex-wrap:wrap;min-height:25.5px;margin:var(--length3) 0}form.oi-3a86ea>label{width:100%;padding-bottom:3px}form.oi-3a86ea-toggle{flex-wrap:nowrap}form.oi-3a86ea-toggle>label{align-self:start;padding:5px 0 4px 0;margin-right:var(--length2)}form.oi-3a86ea-toggle .oi-3a86ea-input,form.oi-3a86ea-toggle>label{width:initial}@media only screen and (min-width:30em){form.oi-3a86ea{flex-wrap:nowrap;width:calc(var(--input-width) + var(--label-width));max-width:100%;margin:initial}form.oi-3a86ea>label{flex-shrink:0;align-self:start;padding:5px 0 4px 0;width:var(--label-width);margin-right:var(--length2)}}.oi-3a86ea button,.oi-3a86ea input,.oi-3a86ea select,.oi-3a86ea table,.oi-3a86ea textarea{color:inherit;font:inherit;box-sizing:border-box}.oi-3a86ea button,.oi-3a86ea input{line-height:normal}.oi-3a86ea button{margin:0}.oi-3a86ea button+button{margin-left:var(--length1)}.oi-3a86ea-textarea{--input-width:520px}.oi-3a86ea-textarea>div{width:100%;text-align:right}.oi-3a86ea-textarea>div textarea{display:block;width:100%;margin:0;padding:4px;min-height:calc(2.5em + 8px);max-height:calc(14em + 8px);resize:vertical}.oi-3a86ea-textarea>div button{margin:4px 0 0}.oi-3a86ea input[type=checkbox],.oi-3a86ea input[type=radio]{margin-right:var(--length2)}.oi-3a86ea-input{display:flex;align-items:center;width:100%}.oi-3a86ea-input>button,.oi-3a86ea-input>input,.oi-3a86ea-input>output{width:inherit;min-width:0}.oi-3a86ea-input>button,.oi-3a86ea-input>input[type=number],.oi-3a86ea-input>output{flex-shrink:2.5}.oi-3a86ea-input>output{white-space:pre;margin-left:var(--length2)}.oi-3a86ea-input>button{margin-left:var(--length1)}.oi-3a86ea-input>input[type=number]{font-variant-numeric:tabular-nums;flex-shrink:1.5;text-overflow:ellipsis}.oi-3a86ea-input>input[type=color]~output{font-family:ui-monospace,var(--monospace)}.oi-3a86ea-input:not(:only-child)>input[type=color]~output{flex-shrink:1}.oi-3a86ea-input>input[type=range]{margin:0;margin-left:var(--length2)}.oi-3a86ea-input>input[type=date],.oi-3a86ea-input>input[type=datetime-local]{height:22px}form.oi-3a86ea-checkbox{width:auto;max-width:640px}.oi-3a86ea-checkbox div label{display:inline-flex;align-items:center;margin-right:var(--length3)}form.oi-3a86ea-table{display:block;overflow-y:auto;width:100%}.oi-3a86ea-table table{max-width:initial;min-height:33px;margin:0;border-collapse:separate;border-spacing:0;font-variant-numeric:tabular-nums}.oi-3a86ea-table tr:not(:last-child) td,.oi-3a86ea-table tr:not(:last-child) th{border-bottom:solid 1px #eee}.oi-3a86ea-table thead tr td,.oi-3a86ea-table thead tr th{border-bottom:solid 1px #ccc}.oi-3a86ea-table thead th span{display:inline-block;width:.5em;margin-left:-.5em}.oi-3a86ea-table td,.oi-3a86ea-table th{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;padding:3px 6.5px 3px 0}.oi-3a86ea-table tr>:not(:first-of-type){padding-left:var(--length2)}.oi-3a86ea-table tr>:last-of-type{padding-right:var(--length3)}.oi-3a86ea-table tr>:first-of-type{text-overflow:unset;width:19px}.oi-3a86ea-table tr>:first-of-type input{opacity:0;margin:0 3px 1px 4px}.oi-3a86ea-table tr:hover>:first-of-type input:enabled,.oi-3a86ea-table tr>:first-of-type input:checked,.oi-3a86ea-table tr>:first-of-type input:focus,.oi-3a86ea-table tr>:first-of-type input[type=checkbox]:indeterminate{opacity:inherit}.oi-3a86ea-table thead tr{border-bottom:none}.oi-3a86ea-table thead th{position:sticky;top:0;background:#fff;cursor:ns-resize}.oi-3a86ea-table tbody tr:first-child td{padding-top:4px}",document.head.appendChild(e)}function n(e){return null==e?null:"number"==typeof e?`${e}px`:`${e}`}function i(e){return{"--input-width":n(e)}}const a={bubbles:!0};function o(e){e.preventDefault()}function r({currentTarget:e}){(e.form||e).dispatchEvent(new Event("input",a))}function l(e){return e.checkValidity()}function u(e){return e}let s=0;function c(){return"oi-3a86ea-"+ ++s}function d(e,n){if(e)return e=t.html`<label>${e}`,void 0!==n&&(e.htmlFor=n.id=c()),e}function f(e){return Array.isArray(e)?e:Array.from(e)}function p(e){return!!e&&"function"==typeof e[Symbol.iterator]}function h(e){return p(e.columns)?e.columns:e.schema&&p(e.schema.fields)?Array.from(e.schema.fields,(e=>e.name)):"function"==typeof e.columnNames?e.columnNames():void 0}function m(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return"function"==typeof t?t(e):t;const n=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${r=e.getUTCFullYear(),r<0?`-${v(-r,6)}`:r>9999?`+${v(r,6)}`:v(r,4)}-${v(e.getUTCMonth()+1,2)}-${v(e.getUTCDate(),2)}${n||i||a||o?`T${v(n,2)}:${v(i,2)}${a||o?`:${v(a,2)}${o?`.${v(o,3)}`:""}`:""}Z`:""}`;var r}function v(e,t){return`${e}`.padStart(t,"0")}const b=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function y(e){return null==e?"":`${e}`}const g=A((e=>{const t=$(e);return e=>null==e?"":"number"==typeof e?t(e):e instanceof Date?N(e):`${e}`})),$=A((e=>t=>0===t?"0":t.toLocaleString(e))),w=g(),x=$();function k(e){const t=e.toString(),n=t.length;let i,a=-1;e:for(let e=1;e<n;++e)switch(t[e]){case".":a=i=e;break;case"0":0===a&&(a=e),i=e;break;default:if(!+t[e])break e;a>0&&(a=0)}return a>0?t.slice(0,a)+t.slice(i+1):t}function N(e){return m(e,"Invalid Date")}function A(e){let t,n=A;return(i="en")=>i===n?t:t=e(n=i)}function S(e,t){return E(t)-E(e)||(e<t?-1:e>t?1:e>=t?0:NaN)}function O(e,t){return E(t)-E(e)||(t<e?-1:t>e?1:t>=e?0:NaN)}function E(e){return null!=e&&!Number.isNaN(e)}const T=([e])=>e,j=([,e])=>e;function z({multiple:e,render:t,selectedIndexes:n,select:i}){return function(a,{locale:l,keyof:s=(a instanceof Map?T:u),valueof:c=(a instanceof Map?j:u),format:d=(e=>(t,n,i)=>e(s(t,n,i)))(g(l)),multiple:p,key:h,value:m,disabled:v=!1,sort:b,unique:y,...$}={}){if("function"!=typeof s)throw new TypeError("keyof is not a function");if("function"!=typeof c)throw new TypeError("valueof is not a function");if("function"!=typeof d)throw new TypeError("format is not a function");void 0!==e&&(p=e),b=function(e){if(void 0===e||!1===e)return;if(!0===e||"ascending"===e)return S;if("descending"===e)return O;if("function"==typeof e)return e;throw new TypeError("sort is not a function")}(b);let w=+p;void 0===m&&(m=void 0!==h&&a instanceof Map?w>0?Array.from(h,(e=>a.get(e))):a.get(h):void 0),y=!!y;let x=(a=f(a)).map(((e,t)=>[s(e,t,a),t]));void 0!==b&&x.sort((([e],[t])=>b(e,t))),y&&(x=[...new Map(x.map((e=>[M(e[0]),e]))).values()]);const k=x.map(j);!0===p?w=Math.max(1,Math.min(10,k.length)):w>0?p=!0:(p=!1,w=void 0);const[N,A]=t(a,k,function(e,t,n,i,a){const o=new Set(void 0===n?[]:i?f(n):[n]);if(!o.size)return()=>!1;const r=new Set;for(const n of t)o.has(a(e[n],n,e))&&r.add(n);return e=>r.has(e)}(a,k,m,p,c),function(e,t,n,i){if("boolean"==typeof n)return n;const a=new Set(f(n)),o=new Set;for(const n of t)a.has(i(e[n],n,e))&&o.add(n);return e=>o.has(e)}(a,k,v,c),{...$,format:d,multiple:p,size:w});function E(e){if(e&&e.isTrusted&&N.removeEventListener("change",r),p)m=n(A).map((e=>c(a[e],e,a)));else{const e=function(e){return e.value?+e.value:-1}(A);m=e<0?null:c(a[e],e,a)}}return N.addEventListener("input",E),N.addEventListener("change",r),N.addEventListener("submit",o),E(),Object.defineProperty(N,"value",{get:()=>m,set(e){if(p){const t=new Set(e);for(const e of A){const n=+e.value;i(e,t.has(c(a[n],n,a)))}}else A.value=k.find((t=>e===c(a[t],t,a)));E()}})}}function M(e){return null!==e&&"object"==typeof e?e.valueOf():e}function q(e,n){return z({multiple:e,render(i,a,o,r,{format:l,label:u}){const s=t.html`<form class="oi-3a86ea oi-3a86ea-checkbox">
      ${d(u)}<div>
        ${a.map((e=>t.html`<label><input type=${n} disabled=${"function"==typeof r?r(e):r} name=input value=${e} checked=${o(e)}>${l(i[e],e,i)}`))}
      </div>
    </form>`;return[s,C(s.elements.input,e)]},selectedIndexes:e=>Array.from(e).filter((e=>e.checked)).map((e=>+e.value)),select(e,t){e.checked=t}})}const L=q(!1,"radio"),_=q(!0,"checkbox");function C(e,t){return void 0===e?new D(t?[]:null):void 0===e.length?new(t?F:P)(e):e}class D{constructor(e){this._value=e}get value(){return this._value}set value(e){}*[Symbol.iterator](){}}class P{constructor(e){this._input=e}get value(){const{_input:e}=this;return e.checked?e.value:""}set value(e){const{_input:t}=this;t.checked||(t.checked=y(e)===t.value)}*[Symbol.iterator](){yield this._input}}class F{constructor(e){this._input=e,this._value=e.checked?[e.value]:[]}get value(){return this._value}set value(e){const{_input:t}=this;t.checked||(t.checked=y(e)===t.value,this._value=t.checked?[t.value]:[])}*[Symbol.iterator](){yield this._input}}function U(e){if(void 0===e)return[null,null];const n=c();return[t.html`<datalist id=${n}>${Array.from(e,(e=>t.html`<option value=${y(e)}>`))}`,n]}function I(e,n,i,{validate:a=l,submit:u}={},{get:s=(e=>e.value),set:c=((e,t)=>e.value=y(t)),same:d=((e,t)=>e.value===t),after:f=(e=>n.after(e))}={}){const p=(u=!0===u?"Submit":u||null)?t.html`<button type=submit disabled>${u}`:null;function h(){if(a(n))return i=s(n),!0}return u&&f(p),c(n,i),i=a(n)?s(n):void 0,e.addEventListener("submit",(function(e){o(e),u&&(h()?(p.disabled=!0,r(e)):n.reportValidity())})),n.oninput=function(e){u?(p.disabled=d(n,i),e.stopPropagation()):h()||e.stopPropagation()},Object.defineProperty(e,"value",{get:()=>i,set(e){c(n,e),h()}})}function K({label:e,value:n="",type:a="text",placeholder:o,pattern:r,spellcheck:l,autocomplete:u,autocapitalize:s,min:c,max:f,minlength:p,maxlength:h,required:m=p>0,datalist:v,readonly:b,disabled:y,width:g,...$}={}){const[w,x]=U(v),k=t.html`<input
    type=${a}
    name=text
    list=${x}
    readonly=${b}
    disabled=${y}
    required=${m}
    min=${c}
    max=${f}
    minlength=${p}
    maxlength=${h}
    pattern=${r}
    spellcheck=${R(l)}
    autocomplete=${H(u)}
    autocapitalize=${H(s)}
    placeholder=${o}
  >`;return I(t.html`<form class=oi-3a86ea style=${i(g)}>
    ${d(e,k)}<div class=oi-3a86ea-input>
      ${k}
    </div>${w}
  </form>`,k,n,$)}function R(e){return null==e?null:`${e}`}function H(e){return null==e?null:`${!1===e?"off":!0===e?"on":e}`}const V={type:"date",get:e=>e.valueAsDate,set:(e,t)=>e.value=B(t),same:(e,t)=>+e.valueAsDate==+t,format:B},W={type:"datetime-local",get:e=>e.value?new Date(e.value):null,set:(e,t)=>e.value=G(t),same:(e,t)=>+new Date(e.value)==+t,format:G};function Z({label:e,min:n,max:a,required:o,readonly:r,disabled:l,width:u,value:s,...c}={},{type:f,format:p,...h}){const m=t.html`<input type=${f} name=date readonly=${r} disabled=${l} required=${o} min=${p(n)} max=${p(a)}>`;return I(t.html`<form class=oi-3a86ea style=${i(u)}>
    ${d(e,m)}<div class=oi-3a86ea-input>
      ${m}
    </div>
  </form>`,m,Y(s),c,h)}function Y(e){return e instanceof Date&&!isNaN(e)?e:"string"==typeof e?(t=e,n=null,b.test(t+="")?new Date(t):"function"==typeof n?n(t):n):null==e||isNaN(e=+e)?null:new Date(+e);var t,n}function B(e){return(e=Y(e))?e.toISOString().slice(0,10):e}function G(e){return(e=Y(e))?new Date(+e-1e3*e.getTimezoneOffset()*60).toISOString().slice(0,16):e}function J(e){return t.html`<div>${e}`}function Q(e,{template:t=J}={}){let n=(e=[...e]).map((({value:e})=>e));return Object.defineProperty(t(e),"value",{get(){for(let t=0,i=e.length;t<i;++t){const i=e[t].value;Object.is(i,n[t])||(n=[...n],n[t]=i)}return n},set(t=[]){for(let n=0,i=e.length;n<i;++n)e[n].value=t[n]}})}function X(e){return t.html`<div>${Object.values(e)}`}function ee(e,{template:t=X}={}){e={...e};let n=Object.fromEntries(Object.entries(e).map((([e,{value:t}])=>[e,t])));return Object.defineProperty(t(e),"value",{get(){for(const t in n){const i=e[t].value;Object.is(i,n[t])||(n={...n},n[t]=i)}return n},set(t={}){for(const n in e)e[n].value=t[n]}})}const te=1e-6;function ne({extent:[e,n],range:a},{format:r=k,transform:s,invert:c,label:f="",value:p,step:h,disabled:m,placeholder:v,validate:b=l,width:y}={}){let g;if("function"!=typeof r)throw new TypeError("format is not a function");(null==e||isNaN(e=+e))&&(e=-1/0),(null==n||isNaN(n=+n))&&(n=1/0),e>n&&([e,n]=[n,e],void 0===s&&(s=ie)),void 0!==h&&(h=+h);const $=t.html`<input type=number min=${isFinite(e)?e:null} max=${isFinite(n)?n:null} step=${null==h?"any":h} name=number required placeholder=${v} oninput=${function(e){const t=A($.valueAsNumber);if(isFinite(t)&&(a&&(a.valueAsNumber=s(t)),b($)))return void(g=t);e&&e.stopPropagation()}} disabled=${m}>`;let w;if(a){if(void 0===s&&(s=u),"function"!=typeof s)throw new TypeError("transform is not a function");if(void 0===c&&(c=void 0===s.invert?(x=s)===u||x===ie?x:x===Math.sqrt?ae:x===Math.log?Math.exp:x===Math.exp?Math.log:e=>function(e,t,n){let i,a,o,r=100;n=void 0===n?0:+n,t=+t;do{a=e(n),o=e(n+te),a===o&&(o=a+te),n-=i=-1e-6*(a-t)/(a-o)}while(r-- >0&&Math.abs(i)>te);return r<0?NaN:n}(x,e,e):s.invert),"function"!=typeof c)throw new TypeError("invert is not a function");let i=+s(e),o=+s(n);i>o&&([i,o]=[o,i]),a=t.html`<input type=range min=${isFinite(i)?i:null} max=${isFinite(o)?o:null} step=${void 0===h||s!==u&&s!==ie?"any":h} name=range oninput=${function(t){const i=A(c(a.valueAsNumber));if(isFinite(i)&&($.valueAsNumber=Math.max(e,Math.min(n,i)),b($)))return g=$.valueAsNumber,void($.value=r(g));t&&t.stopPropagation()}} disabled=${m}>`,w=s===u?a:t.html`<input type=range min=${e} max=${n} step=${void 0===h?"any":h} name=range disabled=${m}>`}else a=null,s=c=u;var x;const N=t.html`<form class=oi-3a86ea style=${i(y)}>
    ${d(f,$)}<div class=oi-3a86ea-input>
      ${$}${a}
    </div>
  </form>`;function A(t){return w?(t=Math.max(e,Math.min(n,t)),isFinite(t)?(w.valueAsNumber=t,w.valueAsNumber):t):+t}return N.addEventListener("submit",o),Object.defineProperty(N,"value",{get:()=>g,set(e){e=A(e),isFinite(e)&&($.valueAsNumber=e,a&&(a.valueAsNumber=s(e)),b($)&&(g=e,$.value=r(g)))}}),void 0===p&&w&&(p=w.valueAsNumber),void 0!==p&&(N.value=p),N}function ie(e){return-e}function ae(e){return e*e}function oe(e){const t=`${e}`.split(/\s+/g).filter((e=>e)).map(ue);return e=>{if(null==e)return!1;if("object"==typeof e)e:for(const n of t){for(const t of le(e))if(n.test(t))continue e;return!1}else for(const n of t)if(!n.test(e))return!1;return!0}}function re(e){return t=>{const n=`${t}`.split(/\s+/g).filter((e=>e)).map(ue);return t=>{e:for(const i of n){for(const n of e)if(i.test(t[n]))continue e;return!1}return!0}}}function*le(e){for(const t in e)yield e[t]}function ue(e){return new RegExp(`(?:^|[^\\p{L}-])${function(e){return e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}(e)}`,"iu")}const se=A((e=>{const t=$(e);return e=>`${t(e)} result${1===e?"":"s"}`})),ce=z({render(e,n,a,o,{format:r,multiple:l,size:u,label:s,width:c}){const f=t.html`<select class=oi-3a86ea-input disabled=${!0===o} multiple=${l} size=${u} name=input>
      ${n.map((n=>t.html`<option value=${n} disabled=${"function"==typeof o&&o(n)} selected=${a(n)}>${y(r(e[n],n,e))}`))}
    </select>`;return[t.html`<form class=oi-3a86ea style=${i(c)}>${d(s,f)}${f}`,f]},selectedIndexes:e=>Array.from(e.selectedOptions,(e=>+e.value)),select(e,t){e.selected=t}}),de=22;function fe({root:e,id:i},a,{columns:o=h(a),value:r,required:l=!0,sort:s,reverse:c=!1,format:d,locale:p,align:m,header:v,rows:b=11.5,width:y={},multiple:w=!0,layout:x}={}){o=void 0===o?function(e){const t=new Set;for(const n of e)for(const e in n)t.add(e);return Array.from(t)}(a):f(o),void 0===x&&(x=o.length>=12?"auto":"fixed"),d=function(e={},t,n,i){const a=Object.create(null);for(const o of n)if(o in e)a[o]=e[o];else switch(me(t,o)){case"number":a[o]=$(i);break;case"date":a[o]=N;break;default:a[o]=g(i)}return a}(d,a,o,p),m=function(e={},t,n){const i=Object.create(null);for(const a of n)a in e?i[a]=e[a]:"number"===me(t,a)&&(i[a]="right");return i}(m,a,o);let k=[],A=[],T=a[Symbol.iterator](),j=0,z=function(e){if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("function"==typeof e.numRows)return e.numRows()}(a),M=L(2*b);function q(){j>=0&&(j=T=void 0,A=Uint32Array.from(k=f(a),((e,t)=>t)),z=A.length)}function L(e){if(e=Math.floor(e),void 0!==z)return Math.min(z,e);if(e<=j)return e;for(;e>j;){const{done:e,value:t}=T.next();if(e)return z=j;A.push(j++),k.push(t)}return j}let _=null,C=!1,D=new Set,P=null,F=null;const U=t.html`<tbody>`,I=t.html`<tr><td><input type=${w?"checkbox":"radio"} name=${w?null:"radio"}></td>${o.map((()=>t.html`<td>`))}`,K=t.html`<tr><th><input type=checkbox onclick=${function(e){if(q(),this.checked){D=new Set(A);for(const e of U.childNodes)pe(e).checked=!0}else{for(let e of D)V(e);P=F=null,e.detail&&e.currentTarget.blur()}G()}} disabled=${!w}></th>${o.map((e=>t.html`<th title=${e} onclick=${t=>B(t,e)}><span></span>${v&&e in v?v[e]:e}</th>`))}</tr>`;function R(e,t){if(j===e){for(;e<t;++e)H(T.next().value,e);j=t}else for(let n;e<t;++e)n=A[e],H(k[n],n)}function H(e,t){const n=I.cloneNode(!0),i=pe(n);if(i.onclick=Y,i.checked=D.has(t),i.value=t,null!=e)for(let i=0;i<o.length;++i){let r=o[i],l=e[r];E(l)&&(l=d[r](l,t,a),l instanceof Node||(l=document.createTextNode(l)),n.childNodes[i+1].appendChild(l))}U.append(n)}function V(e){q();let t=A.indexOf(e);if(t<U.childNodes.length){pe(U.childNodes[t]).checked=!1}D.delete(e)}function W(e){q();let t=A.indexOf(e);if(t<U.childNodes.length){pe(U.childNodes[t]).checked=!0}D.add(e)}function*Z(e,t){if(q(),(e=A.indexOf(e))<(t=A.indexOf(t)))for(;e<=t;)yield A[e++];else for(;t<=e;)yield A[t++]}function Y(e){q();let t=+this.value;if(w)if(e.shiftKey){if(null===P)P=D.size?function(e){return e[Symbol.iterator]().next().value}(D):A[0];else for(let e of Z(P,F))V(e);F=t;for(let e of Z(P,F))W(e)}else P=F=t,D.has(t)?(V(t),P=F=null,e.detail&&e.currentTarget.blur()):W(t);else{for(let e of D)V(e);W(t)}G()}function B(t,n){q();const i=t.currentTarget;let a;if(_===i&&t.metaKey)he(_).textContent="",_=null,C=!1,a=S;else{_===i?C=!C:(_&&(he(_).textContent=""),_=i,C=t.altKey);const e=C?O:S;a=(t,i)=>e(k[t][n],k[i][n]),he(i).textContent=C?"▾":"▴"}for(A.sort(a),D=new Set(Array.from(D).sort(a)),e.scrollTo(e.scrollLeft,0);U.firstChild;)U.firstChild.remove();R(0,M=L(2*b)),P=F=null,G()}function G(){const e=pe(K);e.disabled=!w&&!D.size,e.indeterminate=w&&D.size&&D.size!==z,e.checked=D.size,r=void 0}if(e.appendChild(t.html.fragment`<table style=${{tableLayout:x}}>
  <thead>${L(1)||o.length?K:null}</thead>
  ${U}
</table>
<style>${o.map(((e,t)=>{const a=[];if(null!=m[e]&&a.push(`text-align:${m[e]}`),null!=y[e]&&a.push(`width:${n(y[e])}`),a.length)return`#${i} tr>:nth-child(${t+2}){${a.join(";")}}`})).filter(u).join("\n")}</style>`),e.addEventListener("scroll",(()=>{e.scrollHeight-e.scrollTop<b*de*1.5&&M<L(M+1)&&R(M,M=L(M+b))})),void 0===s&&c&&(q(),A.reverse()),void 0!==r){if(q(),w){const e=new Set(r);D=new Set(A.filter((t=>e.has(k[t]))))}else{const e=k.indexOf(r);D=e<0?new Set:new Set([e])}G()}if(L(1)?R(0,M):U.append(t.html`<tr>${o.length?t.html`<td>`:null}<td rowspan=${o.length} style="padding-left: var(--length3); font-style: italic;">No results.</td></tr>`),void 0!==s){let e=o.indexOf(s);e>=0&&(c&&(_=K.childNodes[e+1]),B({currentTarget:K.childNodes[e+1]},o[e]))}return Object.defineProperty(e,"value",{get(){if(void 0===r)if(q(),w)(r=Array.from(l&&0===D.size?A:D,(e=>k[e]))).columns=o;else if(D.size){const[e]=D;r=k[e]}else r=null;return r},set(e){if(q(),w){const t=new Set(e),n=new Set(A.filter((e=>t.has(k[e]))));for(const e of D)n.has(e)||V(e);for(const e of n)D.has(e)||W(e)}else{const t=k.indexOf(e);D=t<0?new Set:new Set([t])}r=void 0}})}function pe(e){return e.firstChild.firstChild}function he(e){return e.firstChild}function me(e,t){for(const n of e){if(null==n)continue;const e=n[t];if(null!=e)return"number"==typeof e?"number":e instanceof Date?"date":void 0}}function ve(e){return new Promise((t=>{requestAnimationFrame((()=>{const n=e.closest(".observablehq");if(!n)return t();const i=new MutationObserver((()=>{n.contains(e)||(i.disconnect(),t())}));i.observe(n,{childList:!0})}))}))}function be(e,t){const n=function(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];default:return e.value}}(t);switch(e.type){case"range":case"number":e.valueAsNumber=n;break;case"date":e.valueAsDate=n;break;case"checkbox":e.checked=n;break;case"file":e.multiple?e.files=n:e.files=[n];break;default:e.value=n}}function ye(e){switch(e.type){case"button":case"submit":return"click";case"file":return"change";default:return"input"}}e.bind=function(e,t,n=ve(e)){const i=ye(t),o=()=>be(e,t);return o(),e.addEventListener(ye(e),(()=>(be(t,e),t.dispatchEvent(new Event(i,a))))),t.addEventListener(i,o),n.then((()=>t.removeEventListener(i,o))),e},e.button=function(e="≡",{label:i="",value:a,reduce:l,disabled:s,required:c=!1,width:f}={}){const p="string"==typeof e||e instanceof Node;p?(c||void 0!==a||(a=0),void 0===l&&(l=(e=0)=>e+1),s=new Set(s?[e]:[]),e=[[e,l]]):(c||void 0!==a||(a=null),s=new Set(!0===s?Array.from(e,(([e])=>e)):s||void 0));const h=t.html`<form class=oi-3a86ea>`;h.addEventListener("submit",o);const m={width:n(f)},v=Array.from(e,(([e,n=u])=>{if("function"!=typeof n)throw new TypeError("reduce is not a function");return t.html`<button disabled=${s.has(e)} style=${m} onclick=${e=>{h.value=n(h.value),r(e)}}>${e}`}));return(i=d(i,p?v[0]:void 0))&&h.append(i),h.append(...v),h.value=a,h},e.checkbox=_,e.color=function({label:e,value:n,required:a,datalist:o,readonly:r,disabled:l,width:u,...s}={}){const[f,p]=U(o),h=c(),m=t.html`<input
    type=color
    name=text
    value=${n}
    id=${h}
    list=${p}
    readonly=${r}
    disabled=${l}
    required=${a}
  >`,v=t.html`<output
    for=${h}
  >`;return v.value=m.value,m.addEventListener("input",(()=>v.value=m.value)),I(t.html`<form class=oi-3a86ea style=${i(u)}>
    ${d(e,m)}<div class=oi-3a86ea-input>
      <div class=oi-3a86ea-input>${m}${v}</div>
    </div>${f}
  </form>`,m,n,s,{after:e=>m.parentNode.after(e)})},e.date=function(e){return Z(e,V)},e.datetime=function(e){return Z(e,W)},e.disposal=ve,e.email=function(e){return K({...e,type:"email"})},e.fileOf=function(e){class n extends e{constructor(e){super(e.name),Object.defineProperty(this,"_",{value:e}),Object.defineProperty(this,"_url",{writable:!0})}async url(){return this._url||(this._url=URL.createObjectURL(this._))}async blob(){return this._}async stream(){return this._.stream()}}return function({label:e,required:a,accept:o,capture:r,multiple:l,disabled:u,width:s,value:c,submit:f,...p}={}){const h=t.html`<input
      type=file
      name=file
      disabled=${u}
      required=${a}
      accept=${o}
      capture=${r}
      multiple=${l}
    >`;return I(t.html`<form class=oi-3a86ea style=${i(s)}>
      ${d(e,h)}<div class=oi-3a86ea-input>
        ${h}
      </div>
    </form>`,h,void 0,p,{get:e=>l?Array.from(e.files,(e=>new n(e))):e.files.length?new n(e.files[0]):null,set:()=>{},same:()=>!1})}},e.form=function(e,t){return(Array.isArray(e)?Q:ee)(e,t)},e.formatAuto=w,e.formatDate=N,e.formatLocaleAuto=g,e.formatLocaleNumber=$,e.formatNumber=x,e.formatTrim=k,e.input=function(e){const t=new EventTarget;return t.value=e,t},e.number=function(e,t){return arguments.length<2&&(t=e,e=void 0),void 0===e&&(e=[]),ne({extent:e},t)},e.password=function(e){return K({...e,type:"password"})},e.radio=L,e.range=function(e=[0,1],t){return ne({extent:e,range:!0},t)},e.search=function(e,{locale:n,format:a=se(n),label:r,query:l="",placeholder:u="Search",columns:s=h(e),spellcheck:c,autocomplete:p,autocapitalize:m,filter:v=(void 0===s?oe:re(s)),datalist:b,disabled:g,required:$=!0,width:w}={}){let x=[];e=f(e),$=!!$;const[k,N]=U(b),A=t.html`<input
    name=input
    type=search
    list=${N}
    disabled=${g}
    spellcheck=${R(c)}
    autocomplete=${H(p)}
    autocapitalize=${H(m)}
    placeholder=${u}
    value=${l}
    oninput=${E}
  >`,S=t.html`<output name=output>`,O=t.html`<form class=oi-3a86ea style=${i(w)}>
    ${d(r,A)}<div class=oi-3a86ea-input>
      ${A}${S}
    </div>${k}
  </form>`;function E(){x=A.value||$?e.filter(v(A.value)):[],void 0!==s&&(x.columns=s),S.value=a(x.length)}return O.addEventListener("submit",o),E(),Object.defineProperties(O,{value:{get:()=>x},query:{get:()=>l,set(e){l=A.value=y(e),E()}}})},e.searchFilter=oe,e.select=ce,e.table=function(e,i={}){const{rows:a=11.5,height:o,maxHeight:r=(void 0===o?(a+1)*de-1:void 0),width:l={},maxWidth:u}=i,s=c(),d=t.html`<form class="oi-3a86ea oi-3a86ea-table" id=${s} style=${{height:n(o),maxHeight:n(r),width:"string"==typeof l||"number"==typeof l?n(l):void 0,maxWidth:n(u)}}>`;return e&&"function"==typeof e.then?(Object.defineProperty(d,"value",{configurable:!0,set(){throw new Error("cannot set value while data is unresolved")}}),Promise.resolve(e).then((e=>fe({root:d,id:s},e,i)))):fe({root:d,id:s},e,i),d},e.tel=function(e){return K({...e,type:"tel"})},e.text=K,e.textarea=function({value:e="",label:n,placeholder:o,spellcheck:r,autocomplete:l,autocapitalize:u,rows:s=3,minlength:c,maxlength:f,required:p=c>0,readonly:h,disabled:m,monospace:v=!1,resize:b=s<12,width:y,...g}={}){const $=t.html`<textarea
    name=text
    readonly=${h}
    disabled=${m}
    required=${p}
    rows=${s}
    minlength=${c}
    maxlength=${f}
    spellcheck=${R(r)}
    autocomplete=${H(l)}
    autocapitalize=${H(u)}
    placeholder=${o}
    onkeydown=${function(e){if(g.submit&&"Enter"===e.key&&(e.metaKey||e.ctrlKey))return w.dispatchEvent(new Event("submit",a))}}
    style=${{width:y,fontFamily:v?"var(--monospace, monospace)":null,resize:b?null:"none"}}
  >`,w=t.html`<form class="oi-3a86ea oi-3a86ea-textarea" style=${i(y)}>
    ${d(n,$)}<div>
      ${$}
    </div>
  </form>`;return I(w,$,e,g)},e.toggle=function({label:e,value:n,values:i,disabled:a}={}){const o=t.html`<input class=oi-3a86ea-input type=checkbox name=input disabled=${a}>`,r=t.html`<form class="oi-3a86ea oi-3a86ea-toggle">${d(e,o)}${o}`;return Object.defineProperty(r,"value",{get:()=>void 0===i?o.checked:i[o.checked?0:1],set(e){o.checked=void 0===i?!!e:e===i[0]}}),void 0!==n&&(r.value=n),r},e.url=function(e){return K({...e,type:"url"})},e.version="0.10.6",Object.defineProperty(e,"__esModule",{value:!0})}));
